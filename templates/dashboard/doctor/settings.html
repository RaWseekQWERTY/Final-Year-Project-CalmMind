{% extends 'dashboard/doctor/base.html' %}

{% block title %}Settings{% endblock %}

{% block header_title %}Settings{% endblock %}

{% block content %}
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
    <!-- Manage Availability Box -->
    <div class="bg-white p-6 rounded-lg shadow-md">
        <div class="flex items-center justify-between mb-4">
            <h3 class="text-lg font-semibold text-gray-800">
                <i class="fas fa-clock mr-2"></i>
                Manage Availability
            </h3>
        </div>
        <p class="text-gray-600 mb-4">Set your consultation hours and fees</p>
        <button onclick="openAvailabilityModal()" class="w-full bg-green-500 text-white py-2 px-4 rounded hover:bg-green-600 transition duration-200">
            Update Availability
        </button>
    </div>

    <!-- Manage Information Box -->
    <div class="bg-white p-6 rounded-lg shadow-md">
        <div class="flex items-center justify-between mb-4">
            <h3 class="text-lg font-semibold text-gray-800">
                <i class="fas fa-user-md mr-2"></i>
                Manage Information
            </h3>
        </div>
        <p class="text-gray-600 mb-4">Update your professional details</p>
        <button class="w-full bg-green-500 text-white py-2 px-4 rounded hover:bg-green-600 transition duration-200">
            Update Information
        </button>
    </div>

    <!-- Send Notification Box -->
    <div class="bg-white p-6 rounded-lg shadow-md">
        <div class="flex items-center justify-between mb-4">
            <h3 class="text-lg font-semibold text-gray-800">
                <i class="fas fa-bell mr-2"></i>
                Send Notification
            </h3>
        </div>
        <p class="text-gray-600 mb-4">Send notifications to patients</p>
        <button class="w-full bg-green-500 text-white py-2 px-4 rounded hover:bg-green-600 transition duration-200">
            Send Notification
        </button>
    </div>
</div>

<!-- Availability Modal -->
<div id="availabilityModal" class="fixed inset-0 bg-gray-600 bg-opacity-50 hidden overflow-y-auto h-full w-full">
    <div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white">
        <div class="mt-3">
            <h3 class="text-lg font-semibold text-gray-800 mb-4">Update Availability</h3>
            <form method="post" action="{% url 'doctor_availability_register' request.user.doctor_profile.id %}">
                {% csrf_token %}
                
                <div class="mb-4">
                    <label for="visiting_hours_start" class="block text-sm font-medium text-gray-700">Visiting Hours Start</label>
                    <input type="time" id="visiting_hours_start" name="visiting_hours_start" required 
                           class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring focus:ring-green-200">
                </div>
                
                <div class="mb-4">
                    <label for="visiting_hours_end" class="block text-sm font-medium text-gray-700">Visiting Hours End</label>
                    <input type="time" id="visiting_hours_end" name="visiting_hours_end" required 
                           class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring focus:ring-green-200">
                </div>
                
                <div class="mb-4">
                    <label for="consultation_fee" class="block text-sm font-medium text-gray-700">Consultation Fee</label>
                    <input type="number" id="consultation_fee" name="consultation_fee" required 
                           class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring focus:ring-green-200">
                </div>
                
                <div class="mb-4">
                    <label for="location" class="block text-sm font-medium text-gray-700">Location</label>
                    <input type="text" id="location" name="location" required 
                           class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring focus:ring-green-200">
                </div>

                <div class="flex justify-end space-x-3">
                    <button type="button" onclick="closeAvailabilityModal()" 
                            class="bg-gray-300 text-gray-700 py-2 px-4 rounded hover:bg-gray-400 transition duration-200">
                        Cancel
                    </button>
                    <button type="submit" 
                            class="bg-green-500 text-white py-2 px-4 rounded hover:bg-green-600 transition duration-200">
                        Save
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

{% block extra_js %}
<script>
    function openAvailabilityModal() {
        document.getElementById('availabilityModal').classList.remove('hidden');
    }

    function closeAvailabilityModal() {
        document.getElementById('availabilityModal').classList.add('hidden');
    }

    // Close modal when clicking outside
    document.getElementById('availabilityModal').addEventListener('click', function(e) {
        if (e.target === this) {
            closeAvailabilityModal();
        }
    });
</script>
{% endblock %}

{% endblock %} 